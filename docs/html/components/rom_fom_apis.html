<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="Decoder" href="rom_decoder.html" /><link rel="prev" title="General info" href="rom_general.html" />

    <meta name="generator" content="sphinx-4.3.2, furo 2022.01.02"/>
        <title>Full-order model (FOM) adapter API - Pressio 0.12.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?digest=df49af52631e7917044a9c21a57f7b83170a6dd0" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?digest=fade93df149f7c5fedb3ff897f799dc7d283b420" />
    <link rel="stylesheet" type="text/css" href="../_static/hacks.css" />
    
    


<style>
  body {
    --color-code-background: #002b36;
  --color-code-foreground: #839496;
  
  }
  body[data-theme="dark"] {
    --color-code-background: #002b36;
  --color-code-foreground: #839496;
  
  }
  @media (prefers-color-scheme: dark) {
    body:not([data-theme="light"]) {
      --color-code-background: #002b36;
  --color-code-foreground: #839496;
  
    }
  }
</style></head>
  <body>
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" />
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">Pressio 0.12.0 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  
  <span class="sidebar-brand-text">Pressio 0.12.0 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation and Dependencies</a></li>
<li class="toctree-l1"><a class="reference internal" href="mpl.html"><code class="docutils literal notranslate"><span class="pre">mpl</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="utils.html"><code class="docutils literal notranslate"><span class="pre">utils</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="type_traits.html"><code class="docutils literal notranslate"><span class="pre">type_traits</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="expressions.html"><code class="docutils literal notranslate"><span class="pre">expressions</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="ops.html"><code class="docutils literal notranslate"><span class="pre">ops</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="qr.html"><code class="docutils literal notranslate"><span class="pre">qr</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="linsolvers.html"><code class="docutils literal notranslate"><span class="pre">linear</span> <span class="pre">solvers</span></code></a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="nonlinsolvers.html"><code class="docutils literal notranslate"><span class="pre">nonlinear</span> <span class="pre">solvers</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="nonlinsolvers_system_api.html">Problem APIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="nonlinsolvers_nr.html">Newton-Raphson</a></li>
<li class="toctree-l2"><a class="reference internal" href="nonlinsolvers_gn.html">Gauss-Newton</a></li>
<li class="toctree-l2"><a class="reference internal" href="nonlinsolvers_lm.html">Levenberg-Marquardt</a></li>
<li class="toctree-l2"><a class="reference internal" href="nonlinsolvers_irls.html">Iteratively reweighted least squares</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="ode.html"><code class="docutils literal notranslate"><span class="pre">ode</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="ode_advance.html">advancers</a></li>
<li class="toctree-l2"><a class="reference internal" href="ode_steppers_explicit.html">explicit steppers</a></li>
<li class="toctree-l2"><a class="reference internal" href="ode_steppers_implicit.html">implicit steppers</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="rom.html"><code class="docutils literal notranslate"><span class="pre">rom</span></code></a><input checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="rom_general.html">General info</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Full-order model (FOM) adapter API</a></li>
<li class="toctree-l2"><a class="reference internal" href="rom_decoder.html">Decoder</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="rom_galerkin.html">Galerkin: high-level details</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="rom_galerkin_default.html">Default problem</a></li>
<li class="toctree-l3"><a class="reference internal" href="rom_galerkin_hypred.html">Hyper-reduced problem</a></li>
<li class="toctree-l3"><a class="reference internal" href="rom_galerkin_masked.html">Masked problem</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="rom_lspg_steady.html">Steady LSPG</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="rom_lspg_default_steady.html">Steady default problem</a></li>
<li class="toctree-l3"><a class="reference internal" href="rom_lspg_hypred_steady.html">Steady hyper-reduced problem</a></li>
<li class="toctree-l3"><a class="reference internal" href="rom_lspg_masked_steady.html">Steady masked problem</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="rom_lspg_unsteady.html">Unsteady LSPG</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="rom_lspg_default.html">Unsteady default problem</a></li>
<li class="toctree-l3"><a class="reference internal" href="rom_lspg_hypred.html">Hyper-reduced problem</a></li>
<li class="toctree-l3"><a class="reference internal" href="rom_lspg_masked.html">Masked problem</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="rom_wls.html">WLS</a></li>
<li class="toctree-l2"><a class="reference internal" href="rom_hyperreduction.html">Hyperreduction</a></li>
</ul>
</li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <div class="content-icon-container">
          <div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <div class="section" id="full-order-model-fom-adapter-api">
<h1>Full-order model (FOM) adapter API<a class="headerlink" href="#full-order-model-fom-adapter-api" title="Permalink to this headline">¶</a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><em>The FOM adapter is the layer standardizing how pressio
queries operators from an application.</em></p>
<p>It is one of the most important features and a pivotal design in pressio.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Minimally intrusive, you only need to expose information you already have
Preparing an adapter should only involve <em>exposing</em> some operators in your application.
Pressio does NOT require you to provide information that you don’t already have.
In fact, pressio needs to access <em>standard</em> information/operators that your application
already assembles in some form or another. In some cases, these operators might not
be fully exposed yet, so all we need is for you to make them accessible.
As such, writing an adapter is, in most cases, relatively simple.
Note, also, that writing an adapter for <em>your</em> application only involves
operating within <em>your</em> application domain, using your data structures
and whatever functionalities your application supports.
Therefore, this adapter <em>lives within your application space</em>.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Different adapters for different needs
Depending on what problem you are trying to solve,
we haved designed different adapter concepts/APIs,
e.g. steady, unsteady, exposing only partial information, etc,
that fit different scenarios.
Note that not all adapters can be used for all ROM methods we support.
See below for all the details.</p>
</div>
<div class="section" id="steady-api">
<h2>Steady API<a class="headerlink" href="#steady-api" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Intended for when your FOM application is expressed as</p>
<div class="math-wrapper"><div class="math notranslate nohighlight">
\[\boldsymbol{R}(\boldsymbol{y}; \boldsymbol{\mu}) = 0\]</div></div>
<p>where <span class="math notranslate nohighlight">\(y\)</span> is your FOM state, and <span class="math notranslate nohighlight">\(R\)</span> is the residual
todo finish.</p>
</div>
<div class="section" id="synopsis">
<h3>Synopsis<a class="headerlink" href="#synopsis" title="Permalink to this headline">¶</a></h3>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">SteadyFomAdapter</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
  <span class="k">using</span> <span class="n">scalar_type</span>   <span class="o">=</span> <span class="cm">/* your type */</span><span class="p">;</span>
  <span class="k">using</span> <span class="n">state_type</span>    <span class="o">=</span> <span class="cm">/* your type */</span><span class="p">;</span>
  <span class="k">using</span> <span class="n">residual_type</span> <span class="o">=</span> <span class="cm">/* your type */</span><span class="p">;</span>

<span class="k">public</span><span class="o">:</span>
  <span class="c1">// you need to create an instance of the residual</span>
  <span class="n">residual_type</span> <span class="n">createResidual</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>

  <span class="k">template</span><span class="o">&lt;</span><span class="k">class</span> <span class="nc">OperandType</span><span class="o">&gt;</span>
  <span class="n">OperandType</span> <span class="n">createApplyJacobianResult</span><span class="p">(</span><span class="k">const</span> <span class="n">OperandType</span> <span class="o">&amp;</span> <span class="n">B</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>

  <span class="c1">// given a state, you compute the residual</span>
  <span class="kt">void</span> <span class="nf">residual</span><span class="p">(</span><span class="k">const</span> <span class="n">state_type</span> <span class="o">&amp;</span><span class="p">,</span>
                <span class="n">residual_type</span> <span class="o">&amp;</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>

  <span class="c1">// given a state, compute action of Jacobian on B</span>
  <span class="k">template</span><span class="o">&lt;</span><span class="k">class</span> <span class="nc">OperandType</span><span class="o">&gt;</span>
  <span class="kt">void</span> <span class="n">applyJacobian</span><span class="p">(</span><span class="k">const</span> <span class="n">state_type</span> <span class="o">&amp;</span> <span class="n">state</span><span class="p">,</span>
                     <span class="k">const</span> <span class="n">OperandType</span> <span class="o">&amp;</span> <span class="n">B</span><span class="p">,</span>
                     <span class="n">OperandType</span> <span class="o">&amp;</span> <span class="n">A</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
<div class="section" id="notes">
<h3>Notes<a class="headerlink" href="#notes" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The steady adapter can ONLY be used for doing steady LSPG ROMs.</p>
</div>
<p>See the following examples:
toadd</p>
</div>
</div>
<hr class="docutils"/>
<div class="section" id="continuous-time-api-rhs-only">
<h2>Continuous-time API: RHS Only<a class="headerlink" href="#continuous-time-api-rhs-only" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Intended for when your FOM application is expressed in <em>time-continuous</em> form as</p>
<div class="math-wrapper"><div class="math notranslate nohighlight">
\[\frac{d \boldsymbol{y}}{dt} =
\boldsymbol{f}(\boldsymbol{y},t; \boldsymbol{\mu}),
\quad \boldsymbol{y}(0;\boldsymbol{\mu}) = \boldsymbol{y}(\boldsymbol{\mu}),\]</div></div>
<p>where <span class="math notranslate nohighlight">\(y\)</span> is the full-order model (FOM) state,
<span class="math notranslate nohighlight">\(f\)</span> is what we call the FOM velocity (or RHS), and <span class="math notranslate nohighlight">\(t\)</span> is time,
and, for some reason, you can/want to only expose
the right-hand-side (or velocity) of your FOM application.
todo finish.</p>
</div>
<div class="section" id="id1">
<h3>Synopsis<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ContTimeFomAdapterVelocityOnly</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
  <span class="k">using</span> <span class="n">scalar_type</span>   <span class="o">=</span> <span class="cm">/* your type */</span><span class="p">;</span>
  <span class="k">using</span> <span class="n">state_type</span>    <span class="o">=</span> <span class="cm">/* your type */</span><span class="p">;</span>
  <span class="k">using</span> <span class="n">velocity_type</span> <span class="o">=</span> <span class="cm">/* your type */</span><span class="p">;</span>

<span class="k">public</span><span class="o">:</span>
  <span class="c1">// you need to create an instance of the velocity (or RHS)</span>
  <span class="n">velocity_type</span> <span class="n">createVelocity</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>

  <span class="c1">// given a state and time, you compute the velocity (or RHS)</span>
  <span class="kt">void</span> <span class="nf">velocity</span><span class="p">(</span><span class="k">const</span> <span class="n">state_type</span> <span class="o">&amp;</span><span class="p">,</span>
                <span class="k">const</span> <span class="n">scalar_type</span> <span class="o">&amp;</span> <span class="n">time</span><span class="p">,</span>
                <span class="n">velocity_type</span> <span class="o">&amp;</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
<div class="section" id="id2">
<h3>Notes<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This adapter can ONLY be used for doing Galerkin ROMs with explicit time stepping.</p>
</div>
<p>See the following examples:
toadd</p>
</div>
</div>
<hr class="docutils"/>
<div class="section" id="continuous-time-api-rhs-and-jacobian-action">
<h2>Continuous-time API: RHS and Jacobian action<a class="headerlink" href="#continuous-time-api-rhs-and-jacobian-action" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This API is intended for any system expressible in <em>time-continuous</em> form as above,
but you expose both the right-hand-side of your FOM application as well as
the action of the velocity’s Jacobian on some operand (more on this later).</p>
</div>
<div class="section" id="id3">
<h3>Synopsis<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ContTimeFomAdapterWithApplyJacobian</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
  <span class="k">using</span> <span class="n">scalar_type</span>   <span class="o">=</span> <span class="cm">/* your type */</span><span class="p">;</span>
  <span class="k">using</span> <span class="n">state_type</span>    <span class="o">=</span> <span class="cm">/* your type */</span><span class="p">;</span>
  <span class="k">using</span> <span class="n">velocity_type</span> <span class="o">=</span> <span class="cm">/* your type */</span><span class="p">;</span>

<span class="k">public</span><span class="o">:</span>
  <span class="n">velocity_type</span> <span class="n">createVelocity</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>

  <span class="kt">void</span> <span class="nf">velocity</span><span class="p">(</span><span class="k">const</span> <span class="n">state_type</span> <span class="o">&amp;</span><span class="p">,</span>
                <span class="k">const</span> <span class="n">scalar_type</span> <span class="o">&amp;</span> <span class="n">time</span><span class="p">,</span>
                <span class="n">velocity_type</span> <span class="o">&amp;</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>

  <span class="c1">// OperandType: typically the data type you use for the decoder's jacobian</span>
  <span class="k">template</span><span class="o">&lt;</span><span class="k">class</span> <span class="nc">OperandType</span><span class="o">&gt;</span>
  <span class="n">OperandType</span> <span class="n">createApplyJacobianResult</span><span class="p">(</span><span class="k">const</span> <span class="n">OperandType</span> <span class="o">&amp;</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>

  <span class="c1">// computes: A = Jac B</span>
  <span class="k">template</span><span class="o">&lt;</span><span class="k">class</span> <span class="nc">OperandType</span><span class="o">&gt;</span>
  <span class="kt">void</span> <span class="n">applyJacobian</span><span class="p">(</span><span class="k">const</span> <span class="n">state_type</span> <span class="o">&amp;</span><span class="p">,</span>
                     <span class="k">const</span> <span class="n">OperandType</span> <span class="o">&amp;</span> <span class="n">B</span><span class="p">,</span>
                     <span class="k">const</span> <span class="n">scalar_type</span> <span class="o">&amp;</span> <span class="n">time</span><span class="p">,</span>
                     <span class="n">OperandType</span> <span class="o">&amp;</span> <span class="n">A</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
<div class="section" id="id4">
<h3>Notes<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<ul class="simple">
<li><p>Can be used for doing Galerkin ROMs with explicit and implicit time stepping</p></li>
<li><p>Can be used for LSPG and WLS (note that LSPG and WLS only make sense
for implicit time integration).</p></li>
</ul>
</div>
<p>See the following examples:
toadd</p>
</div>
</div>
<hr class="docutils"/>
<div class="section" id="discrete-time-api">
<h2>Discrete-time API<a class="headerlink" href="#discrete-time-api" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This API is intended for any system expressible in a discrete-time form as</p>
<div class="math-wrapper"><div class="math notranslate nohighlight">
\[\boldsymbol{R}(\boldsymbol{y\ *{n+1}}, \boldsymbol{y*\ {n}}, \boldsymbol{y\ *{n-1}}, ..., t*\ {n+1}, dt_{n+1}; ...) = \boldsymbol{0}\]</div></div>
<p>where <span class="math notranslate nohighlight">\(y\)</span> is the full-order model (FOM) state, <span class="math notranslate nohighlight">\(t\)</span> is time, and <span class="math notranslate nohighlight">\(R\)</span> is the residual.
todo finish.</p>
</div>
<div class="section" id="id5">
<h3>Synopsis<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">DiscreteTimeFomAdapter</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
  <span class="k">using</span> <span class="n">scalar_type</span>                 <span class="o">=</span> <span class="cm">/* your type */</span><span class="p">;</span>
  <span class="k">using</span> <span class="n">state_type</span>                  <span class="o">=</span> <span class="cm">/* your type */</span><span class="p">;</span>
  <span class="k">using</span> <span class="n">discrete_time_residual_type</span> <span class="o">=</span> <span class="cm">/* your type */</span><span class="p">;</span>

<span class="k">public</span><span class="o">:</span>
  <span class="n">discrete_time_residual_type</span> <span class="n">createDiscreteTimeResidual</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>

  <span class="c1">// OperandType: typically the data type you use for the decoder's jacobian</span>
  <span class="k">template</span><span class="o">&lt;</span><span class="k">class</span> <span class="nc">OperandType</span><span class="o">&gt;</span>
  <span class="n">operand_t</span> <span class="n">createApplyDiscreteTimeJacobianResult</span><span class="p">(</span><span class="k">const</span> <span class="n">OperandType</span> <span class="o">&amp;</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>

  <span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="nc">step_t</span><span class="p">,</span> <span class="k">typename</span> <span class="p">...</span> <span class="n">Args</span><span class="o">&gt;</span>
  <span class="kt">void</span> <span class="n">discreteTimeResidual</span><span class="p">(</span><span class="k">const</span> <span class="n">step_t</span> <span class="o">&amp;</span> <span class="n">step</span><span class="p">,</span>
                            <span class="k">const</span> <span class="n">scalar_type</span> <span class="o">&amp;</span> <span class="n">time</span><span class="p">,</span>
                            <span class="k">const</span> <span class="n">scalar_type</span> <span class="o">&amp;</span> <span class="n">dt</span><span class="p">,</span>
                            <span class="n">discrete_time_residual_type</span> <span class="o">&amp;</span> <span class="n">R</span><span class="p">,</span>
                            <span class="k">const</span> <span class="n">state_type</span> <span class="o">&amp;</span> <span class="n">y_np1</span><span class="p">,</span>
                            <span class="k">const</span> <span class="n">state_type</span> <span class="o">&amp;</span> <span class="n">y_n</span><span class="p">)</span> <span class="k">const</span>
  <span class="p">{</span>
    <span class="c1">// given y_n+1, y_n</span>
    <span class="c1">// compute R</span>
  <span class="p">}</span>

  <span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="nc">step_t</span><span class="p">,</span> <span class="k">typename</span> <span class="p">...</span> <span class="n">Args</span><span class="o">&gt;</span>
  <span class="kt">void</span> <span class="n">discreteTimeResidual</span><span class="p">(</span><span class="k">const</span> <span class="n">step_t</span> <span class="o">&amp;</span> <span class="n">step</span><span class="p">,</span>
                            <span class="k">const</span> <span class="n">scalar_type</span> <span class="o">&amp;</span> <span class="n">time</span><span class="p">,</span>
                            <span class="k">const</span> <span class="n">scalar_type</span> <span class="o">&amp;</span> <span class="n">dt</span><span class="p">,</span>
                            <span class="n">discrete_time_residual_type</span> <span class="o">&amp;</span> <span class="n">R</span><span class="p">,</span>
                            <span class="k">const</span> <span class="n">state_type</span> <span class="o">&amp;</span> <span class="n">y_np1</span><span class="p">,</span>
                            <span class="k">const</span> <span class="n">state_type</span> <span class="o">&amp;</span> <span class="n">y_n</span><span class="p">,</span>
                            <span class="k">const</span> <span class="n">state_type</span> <span class="o">&amp;</span> <span class="n">y_nm1</span><span class="p">)</span> <span class="k">const</span>
  <span class="p">{</span>
    <span class="c1">// given y_n+1, y_n, y_n-1</span>
    <span class="c1">// compute R</span>
  <span class="p">}</span>

  <span class="c1">// OperandType: typically the data type you use for the decoder's jacobian</span>
  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">step_t</span><span class="p">,</span> <span class="n">OperandType</span><span class="p">,</span> <span class="k">class</span> <span class="p">...</span> <span class="n">Args</span><span class="o">&gt;</span>
  <span class="kt">void</span> <span class="n">applyDiscreteTimeJacobian</span><span class="p">(</span><span class="k">const</span> <span class="n">step_t</span> <span class="o">&amp;</span> <span class="n">step</span><span class="p">,</span>
                                 <span class="k">const</span> <span class="n">scalar_type</span> <span class="o">&amp;</span> <span class="n">time</span><span class="p">,</span>
                                 <span class="k">const</span> <span class="n">scalar_type</span> <span class="o">&amp;</span> <span class="n">dt</span><span class="p">,</span>
                                 <span class="k">const</span> <span class="n">OperandType</span> <span class="o">&amp;</span> <span class="n">B</span><span class="p">,</span>
                                 <span class="n">OperandType</span> <span class="o">&amp;</span> <span class="n">A</span><span class="p">,</span>
                                 <span class="k">const</span> <span class="n">state_type</span> <span class="o">&amp;</span> <span class="n">y_np1</span><span class="p">,</span>
                                 <span class="k">const</span> <span class="n">state_type</span> <span class="o">&amp;</span> <span class="n">y_n</span><span class="p">)</span> <span class="k">const</span>
  <span class="p">{</span>
    <span class="c1">// given y_n+1, y_n</span>
    <span class="c1">// compute A = dR/dy_n+1 B</span>
  <span class="p">}</span>

  <span class="c1">// OperandType: typically the data type you use for the decoder's jacobian</span>
  <span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="nc">step_t</span><span class="p">,</span> <span class="k">typename</span> <span class="p">...</span> <span class="n">Args</span><span class="o">&gt;</span>
  <span class="kt">void</span> <span class="n">applyDiscreteTimeJacobian</span><span class="p">(</span><span class="k">const</span> <span class="n">step_t</span> <span class="o">&amp;</span> <span class="n">step</span><span class="p">,</span>
                                 <span class="k">const</span> <span class="n">scalar_type</span> <span class="o">&amp;</span> <span class="n">time</span><span class="p">,</span>
                                 <span class="k">const</span> <span class="n">scalar_type</span> <span class="o">&amp;</span> <span class="n">dt</span><span class="p">,</span>
                                 <span class="k">const</span> <span class="n">OperandType</span> <span class="o">&amp;</span> <span class="n">B</span><span class="p">,</span>
                                 <span class="n">OperandType</span> <span class="o">&amp;</span> <span class="n">A</span><span class="p">,</span>
                                 <span class="k">const</span> <span class="n">state_type</span> <span class="o">&amp;</span> <span class="n">y_np1</span><span class="p">,</span>
                                 <span class="k">const</span> <span class="n">state_type</span> <span class="o">&amp;</span> <span class="n">y_n</span><span class="p">,</span>
                                 <span class="k">const</span> <span class="n">state_type</span> <span class="o">&amp;</span> <span class="n">y_nm1</span><span class="p">)</span> <span class="k">const</span>
  <span class="p">{</span>
    <span class="c1">// given y_n+1, y_n, y_n-1</span>
    <span class="c1">// compute A = dR/dy_n+1 B</span>
  <span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
<div class="section" id="id6">
<h3>Notes<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<ul class="simple">
<li><p>For doing Galerkin <em>implicit</em> time stepping.</p></li>
<li><p>For doing LSPG and WLS.</p></li>
</ul>
</div>
<p>See the following examples:
toadd</p>
</div>
</div>
<hr class="docutils"/>
<div class="section" id="what-can-you-use-where">
<h2>What can you use where?<a class="headerlink" href="#what-can-you-use-where" title="Permalink to this headline">¶</a></h2>
<p>As anticipated, not all adapters can be used for all supported ROM methods.
The following table illustrates which APIs are admissible for each method.</p>
<div class="table-wrapper"><table class="docutils align-default">
<colgroup>
<col style="width: 20%"/>
<col style="width: 20%"/>
<col style="width: 20%"/>
<col style="width: 20%"/>
<col style="width: 20%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"></th>
<th class="head"><p>Steady API</p></th>
<th class="head"><p>Continuous Time API <span class="raw-html-m2r"><br/></span> (RHS only)</p></th>
<th class="head"><p>Continuous Time API <span class="raw-html-m2r"><br/></span> (RHS, Jacobian action)</p></th>
<th class="head"><p>Discrete Time API</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Galerkin Explicit Stepping</p></td>
<td><p>NA</p></td>
<td><p>supported</p></td>
<td><p>supported</p></td>
<td><p>NA</p></td>
</tr>
<tr class="row-odd"><td><p>Galerkin Implicit Stepping</p></td>
<td><p>NA</p></td>
<td><p>NA</p></td>
<td><p>supported</p></td>
<td><p>supported</p></td>
</tr>
<tr class="row-even"><td><p>LSPG Unsteady</p></td>
<td><p>NA</p></td>
<td><p>NA</p></td>
<td><p>supported</p></td>
<td><p>supported</p></td>
</tr>
<tr class="row-odd"><td><p>LSPG Steady</p></td>
<td><p>supported</p></td>
<td><p>NA</p></td>
<td><p>NA</p></td>
<td><p>NA</p></td>
</tr>
<tr class="row-even"><td><p>WLS Explicit Stepping</p></td>
<td><p>NA</p></td>
<td><p>supported</p></td>
<td><p>supported</p></td>
<td><p>NA</p></td>
</tr>
<tr class="row-odd"><td><p>WLS Implicit Stepping</p></td>
<td><p>NA</p></td>
<td><p>NA</p></td>
<td><p>supported</p></td>
<td><p>supported</p></td>
</tr>
</tbody>
</table></div>
<p>Note: for LSPG there is no distinction between explicit and implicit
because LSPG only makes sense for implicit time stepping.
Actually, it can be shown that explicit LSPG is equivalent to explicit Galerkin.</p>
</div>
<hr class="docutils"/>
<div class="section" id="frequently-asked-questions">
<h2>Frequently Asked Questions<a class="headerlink" href="#frequently-asked-questions" title="Permalink to this headline">¶</a></h2>
<p>1. Should I prefer the continuous-time or discrete-time API?
In general, we suggest users to always prefer the continuous-time API because it is more general.
However, there are situations where the discrete-time API is more useful or even necessary.</p>
</div>
</div>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="rom_decoder.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Decoder</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="rom_general.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">General info</div>
                
              </div>
            </a>
        </div>

        <div class="related-information">
              Copyright &#169; 2021, National Technology &amp; Engineering Solutions of Sandia, LLC (NTESS) |
          Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
          <a href="https://github.com/pradyunsg/furo">Furo theme</a>.
            | <a class="muted-link" href="../_sources/components/rom_fom_apis.rst.txt"
               rel="nofollow">
              Show Source
            </a>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Full-order model (FOM) adapter API</a><ul>
<li><a class="reference internal" href="#steady-api">Steady API</a><ul>
<li><a class="reference internal" href="#synopsis">Synopsis</a></li>
<li><a class="reference internal" href="#notes">Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#continuous-time-api-rhs-only">Continuous-time API: RHS Only</a><ul>
<li><a class="reference internal" href="#id1">Synopsis</a></li>
<li><a class="reference internal" href="#id2">Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#continuous-time-api-rhs-and-jacobian-action">Continuous-time API: RHS and Jacobian action</a><ul>
<li><a class="reference internal" href="#id3">Synopsis</a></li>
<li><a class="reference internal" href="#id4">Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#discrete-time-api">Discrete-time API</a><ul>
<li><a class="reference internal" href="#id5">Synopsis</a></li>
<li><a class="reference internal" href="#id6">Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#what-can-you-use-where">What can you use where?</a></li>
<li><a class="reference internal" href="#frequently-asked-questions">Frequently Asked Questions</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/scripts/furo.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    </body>
</html>