

Defined in\+: {\ttfamily $<$pressio/rom\+\_\+galerkin.\+hpp$>$}

Public namespace\+: {\ttfamily pressio\+::rom\+::galerkin} 

~\newline




\begin{DoxyParagraph}{Prerequisite reading\+:}
Before you read this page, make sure you read the \href{md_pages_components_rom_galerkin.html}{\texttt{ overall design idea of Galerkin}}. 
\end{DoxyParagraph}
\hypertarget{md_pages_components_rom_galerkin_hypred_autotoc_md102}{}\doxysection{API}\label{md_pages_components_rom_galerkin_hypred_autotoc_md102}

\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{template}<}
\DoxyCodeLine{  \textcolor{keyword}{class }FomSystemType,}
\DoxyCodeLine{  \textcolor{keyword}{class }DecoderType,}
\DoxyCodeLine{  \textcolor{keyword}{class }RomStateType,}
\DoxyCodeLine{  \textcolor{keyword}{class }FomReferenceStateType,}
\DoxyCodeLine{  \textcolor{keyword}{class }ProjectorType}
\DoxyCodeLine{  >}
\DoxyCodeLine{\textcolor{keyword}{auto} create\_hyperreduced\_explicit\_problem(pressio::ode::StepScheme scheme,}
\DoxyCodeLine{                                          \textcolor{keyword}{const} FomSystemType \& fomSystem,}
\DoxyCodeLine{                                          DecoderType \& decoder,}
\DoxyCodeLine{                                          \textcolor{keyword}{const} RomStateType \& romState,}
\DoxyCodeLine{                                          \textcolor{keyword}{const} FomReferenceStateType \& fomRefState,}
\DoxyCodeLine{                                          \textcolor{keyword}{const} ProjectorType \& projector);}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{template}<}
\DoxyCodeLine{  \textcolor{keyword}{class }FomSystemType,}
\DoxyCodeLine{  \textcolor{keyword}{class }DecoderType,}
\DoxyCodeLine{  \textcolor{keyword}{class }RomStateType,}
\DoxyCodeLine{  \textcolor{keyword}{class }FomReferenceStateType,}
\DoxyCodeLine{  \textcolor{keyword}{class }ProjectorType}
\DoxyCodeLine{  >}
\DoxyCodeLine{\textcolor{keyword}{auto} create\_hyperreduced\_implicit\_problem(pressio::ode::StepScheme scheme,}
\DoxyCodeLine{                                          \textcolor{keyword}{const} FomSystemType \& fomSystem,}
\DoxyCodeLine{                                          DecoderType \& decoder,}
\DoxyCodeLine{                                          \textcolor{keyword}{const} RomStateType \& romState,}
\DoxyCodeLine{                                          \textcolor{keyword}{const} FomReferenceStateType \& fomRefState,}
\DoxyCodeLine{                                          \textcolor{keyword}{const} ProjectorType \& projector);}

\end{DoxyCode}
 This function returns an instance of the desired Galerkin problem.\hypertarget{md_pages_components_rom_galerkin_hypred_autotoc_md103}{}\doxysubsection{Parameters and Requirements}\label{md_pages_components_rom_galerkin_hypred_autotoc_md103}

\begin{DoxyItemize}
\item {\ttfamily scheme}\+:
\begin{DoxyItemize}
\item enum value to specify the stepper scheme
\item for doing explicit Galerkin, see \href{md_pages_components_ode_steppers_explicit.html}{\texttt{ explicit choices}}
\item for doing implicit Galerkin, seee \href{md_pages_components_ode_steppers_implicit.html}{\texttt{ implicit choices}}
\end{DoxyItemize}
\item {\ttfamily fom\+System}\+:
\begin{DoxyItemize}
\item instance of your FOM adapter specifying the FOM problem ~\newline

\item must satisfy one of the APIs suitable for Galerkin, see \href{./md_pages_components_rom_fom_apis.html}{\texttt{ API list}}
\end{DoxyItemize}
\item {\ttfamily decoder}\+:
\begin{DoxyItemize}
\item decoder object
\item must satify the requirements listed \href{md_pages_components_rom_decoder.html}{\texttt{ here}}
\end{DoxyItemize}
\item {\ttfamily rom\+State}\+:
\begin{DoxyItemize}
\item ROM state
\item currently, it must be either an Eigen vector or a Kokkos 1D view
\end{DoxyItemize}
\item {\ttfamily fom\+Ref\+State}\+:
\begin{DoxyItemize}
\item your FOM reference state that is used when reconstructing the FOM state
\item must be copy-\/constructible and the following must be true\+:~\newline
 
\begin{DoxyCode}{0}
\DoxyCodeLine{std::is\_same<FomReferenceStateType, typename DecoderType::fom\_state\_type>::value == \textcolor{keyword}{true}}

\end{DoxyCode}

\end{DoxyItemize}
\item {\ttfamily projector}\+:
\begin{DoxyItemize}
\item operator responsible for projectng the FOM operators onto the reduced space
\item must be a functor with a specific API, see details below
\end{DoxyItemize}
\end{DoxyItemize}\hypertarget{md_pages_components_rom_galerkin_hypred_autotoc_md104}{}\doxysection{Projector}\label{md_pages_components_rom_galerkin_hypred_autotoc_md104}
todo\+: explain what projectos is for since it is critical.

The projector must be a functor as follows\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{struct }ValidProjector}
\DoxyCodeLine{\{}
\DoxyCodeLine{  \textcolor{keyword}{template}<\textcolor{keyword}{class} operand\_type, \textcolor{keyword}{class} TimeType, \textcolor{keyword}{class} ResultType>}
\DoxyCodeLine{  \textcolor{keywordtype}{void} operator()(\textcolor{keyword}{const} operand\_type \& operand,}
\DoxyCodeLine{                  \textcolor{keyword}{const} TimeType time,}
\DoxyCodeLine{                  ResultType \& result)\textcolor{keyword}{ const}}
\DoxyCodeLine{\textcolor{keyword}{  }\{}
\DoxyCodeLine{    \textcolor{comment}{// apply the projection to the operand, store into result}}
\DoxyCodeLine{  \}}
\DoxyCodeLine{\};}

\end{DoxyCode}


Note that here the {\ttfamily operator()} is templated on the operand because the projector can be called with different arguments depending on whether you are selected an explicit or implicit Galerkin problem\+:
\begin{DoxyItemize}
\item for explicit\+: the projector {\itshape always} receives as operand argument an instance of your FOM velocity
\item for implicit\+: the operand is an instance of your FOM velocity as well as an instance of the decoder\textquotesingle{}s Jacobian.
\end{DoxyItemize}

You are responsible to handle the various cases. Obviously, you are not required to template the operand. If you are working with specific types, you can simply specialize it. For example, suppose that you are working with an application that uses for the velocity a type named {\ttfamily Fom\+Velocity\+Type}, and for the decoder\textquotesingle{}s Jacobian you are using a type named {\ttfamily ADense\+Matrix\+Type}. In such case, a valid projector can be written as\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{struct }ValidProjector}
\DoxyCodeLine{\{}
\DoxyCodeLine{  \textcolor{keyword}{template}<\textcolor{keyword}{class} TimeType, \textcolor{keyword}{class} ResultType>}
\DoxyCodeLine{  \textcolor{keywordtype}{void} operator()(\textcolor{keyword}{const} FomVelocityType \& operand,}
\DoxyCodeLine{                  \textcolor{keyword}{const} TimeType time,}
\DoxyCodeLine{                  ResultType \& result)\textcolor{keyword}{ const}}
\DoxyCodeLine{\textcolor{keyword}{  }\{}
\DoxyCodeLine{    \textcolor{comment}{// apply the projection to the operand, store into result}}
\DoxyCodeLine{  \}}
\DoxyCodeLine{}
\DoxyCodeLine{  \textcolor{keyword}{template}<\textcolor{keyword}{class} TimeType, \textcolor{keyword}{class} ResultType>}
\DoxyCodeLine{  \textcolor{keywordtype}{void} operator()(\textcolor{keyword}{const} ADenseMatrixType \& operand,}
\DoxyCodeLine{                  \textcolor{keyword}{const} TimeType time,}
\DoxyCodeLine{                  ResultType \& result)\textcolor{keyword}{ const}}
\DoxyCodeLine{\textcolor{keyword}{  }\{}
\DoxyCodeLine{    \textcolor{comment}{// apply the projection to the operand, store into result}}
\DoxyCodeLine{  \}}
\DoxyCodeLine{\};}

\end{DoxyCode}


The compiler will select the best match. Note that the result is NOT templated. In general, you can safely assume that {\ttfamily result} is indexable as {\ttfamily (i,...)}. todo describe this more 