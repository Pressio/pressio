Defined in header\+: {\ttfamily $<$pressio/rom\+\_\+decoder.\+hpp$>$}

Public namespace\+: {\ttfamily pressio\+::rom}\hypertarget{md_pages_components_rom_decoder_linear_autotoc_md81}{}\doxysection{Overview}\label{md_pages_components_rom_decoder_linear_autotoc_md81}
A linear decoder is a mapping of the form\+: \[ y_{fom} = \phi y_{rom} \]

where $\phi$ is the Jacobian matrix (for the time being, assume it constant). ~\newline
 Pressio offers a class for this abstraction as described below.


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{template}<\textcolor{keyword}{class} FomStateType, \textcolor{keyword}{class} JacobianMatrixType>}
\DoxyCodeLine{\textcolor{keyword}{auto} create\_time\_invariant\_linear\_decoder(JacobianMatrixType \&\& jac\_matrix);}

\end{DoxyCode}


The returned linear decoder object meets the \href{./md_pages_components_rom_decoder.html}{\texttt{ decoder concept}}.\hypertarget{md_pages_components_rom_decoder_linear_autotoc_md82}{}\doxysubsection{Parameters}\label{md_pages_components_rom_decoder_linear_autotoc_md82}

\begin{DoxyItemize}
\item {\ttfamily Fom\+State\+Type}\+: data type of your FOM state
\item {\ttfamily Jacobian\+Matrix\+Type}\+: data type your Jacobian matrix
\end{DoxyItemize}\hypertarget{md_pages_components_rom_decoder_linear_autotoc_md83}{}\doxysubsection{Requirements}\label{md_pages_components_rom_decoder_linear_autotoc_md83}

\begin{DoxyItemize}
\item {\ttfamily Fom\+State\+Type}\+: must be copy constructible
\item {\ttfamily Jacobian\+Matrix\+Type}\+: must be copy constructible and move constructible.
\end{DoxyItemize}\hypertarget{md_pages_components_rom_decoder_linear_autotoc_md84}{}\doxysection{Example usage for supported types}\label{md_pages_components_rom_decoder_linear_autotoc_md84}
When using data types supported in \href{./md_pages_components_ops.html}{\texttt{ pressio ops}}, an example usage is as follows\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{preprocessor}{\#include "{}pressio/type\_traits.hpp"{}}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include "{}pressio/rom\_decoder.hpp"{}}}
\DoxyCodeLine{\textcolor{keywordtype}{int} main()}
\DoxyCodeLine{\{}
\DoxyCodeLine{  \textcolor{keyword}{namespace }prom = pressio::rom;}
\DoxyCodeLine{}
\DoxyCodeLine{  \textcolor{comment}{// assuming that:}}
\DoxyCodeLine{  \textcolor{comment}{// all proper initialization has been done}}
\DoxyCodeLine{}
\DoxyCodeLine{  \textcolor{keyword}{using} fom\_state\_type = Tpetra::Vector<>;}
\DoxyCodeLine{  \textcolor{keyword}{using} matrix\_type    = Tpetra::MultiVector<>;}
\DoxyCodeLine{}
\DoxyCodeLine{  matrix\_type matJ(\textcolor{comment}{/* construct as needed */});}
\DoxyCodeLine{  \textcolor{keyword}{auto} decoder = prom::create\_time\_invariant\_linear\_decoder<fom\_state\_type>(matJ);}
\DoxyCodeLine{\}}

\end{DoxyCode}
\hypertarget{md_pages_components_rom_decoder_linear_autotoc_md85}{}\doxysection{Example usage for custom types}\label{md_pages_components_rom_decoder_linear_autotoc_md85}
When using custom data types not supported in \href{./md_pages_components_ops.html}{\texttt{ pressio ops}}, you need to provide specializations of a trait class and certain operations and make them \char`\"{}visible\char`\"{} to the compiler to find them and such that pressio can operate on your data. For the sake of explanation, suppose that you use {\ttfamily double} as value type, {\ttfamily My\+Custom\+Vector$<$double$>$} for the FOM state, and {\ttfamily My\+Custom\+Matrix$<$double$>$} for the Jacobian matrix. Then you would need to do something like this\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{preprocessor}{\#include "{}pressio/type\_traits.hpp"{}}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{namespace }pressio\{}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{template}<\textcolor{keyword}{class} ScalarType>}
\DoxyCodeLine{\textcolor{keyword}{struct }Traits<pressiotests::MyCustomVector<ScalarType>>\{}
\DoxyCodeLine{  \textcolor{keyword}{using} scalar\_type = ScalarType;}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{template}<\textcolor{keyword}{class} ScalarType>}
\DoxyCodeLine{\textcolor{keyword}{struct }Traits<pressiotests::MyCustomMatrix<ScalarType>>\{}
\DoxyCodeLine{  \textcolor{keyword}{using} scalar\_type = ScalarType;}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{namespace }ops\{}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{template}<\textcolor{keyword}{class} OperandType, \textcolor{keyword}{class} ScalarType>}
\DoxyCodeLine{\textcolor{keywordtype}{void} product(pressio::nontranspose,}
\DoxyCodeLine{             ScalarType alpha,}
\DoxyCodeLine{             \textcolor{keyword}{const} pressiotests::MyCustomMatrix<ScalarType> \& A,}
\DoxyCodeLine{             \textcolor{keyword}{const} OperandType \& x,}
\DoxyCodeLine{             ScalarType beta,}
\DoxyCodeLine{             pressiotests::MyCustomVector<ScalarType> \& z)}
\DoxyCodeLine{\{}
\DoxyCodeLine{  \textcolor{comment}{// z = beta*z + alpha * A * x}}
\DoxyCodeLine{  \textcolor{comment}{// you need to compute a standard gemv, but all you know about x}}
\DoxyCodeLine{  \textcolor{comment}{// is that its i-\/th element can be retrieved as x(i)}}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{\}\}\textcolor{comment}{//end namespace pressio::ops}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\#include "{}pressio/rom\_decoder.hpp"{}}}
\DoxyCodeLine{\textcolor{keywordtype}{int} main()}
\DoxyCodeLine{\{}
\DoxyCodeLine{  \textcolor{keyword}{namespace }prom = pressio::rom;}
\DoxyCodeLine{}
\DoxyCodeLine{  \textcolor{comment}{// assuming that:}}
\DoxyCodeLine{  \textcolor{comment}{// all proper initialization has been done}}
\DoxyCodeLine{}
\DoxyCodeLine{  \textcolor{keyword}{using} fom\_state\_t = MyCustomVector<double>;}
\DoxyCodeLine{  \textcolor{keyword}{using} matrix\_t    = MyCustomMatrix<double>;}
\DoxyCodeLine{}
\DoxyCodeLine{  matrix\_t matJ(\textcolor{comment}{/* construct as needed */});}
\DoxyCodeLine{  \textcolor{keyword}{auto} decoder = prom::create\_time\_invariant\_linear\_decoder<fom\_state\_type>(matJ);}
\DoxyCodeLine{\}}

\end{DoxyCode}
 